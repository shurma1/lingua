---
  openapi: "3.0.0"
  info: 
    title: "ForeignLang"
    description: "This service defines the main API methods"
    version: "1.0.0"
    contact: 
      name: "Dmitriy Prokhorov"
      email: "dmitriy.prokhorov.04@gmail.com"
  host: "localhost:8080"
  basePath: "/"
  produces: 
    - "application/json"
  schemes: 
    - "http"
  securityDefinitions: 
    JWT: 
      type: "apiKey"
      in: "header"
      name: "Authorization"
      description: ""
  components: 
    securitySchemes: 
      JWT: 
        type: "http"
        scheme: "bearer"
        bearerFormat: "JWT"
        description: "Input your JWT as: Bearer <token>"
    schemas: 
      AuthResponseDTO: 
        type: "object"
        required: 
          - "accessToken"
          - "user"
        properties: 
          accessToken: 
            type: "string"
            description: "JWT access token for authentication"
            example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
          user: 
            $ref: "#/components/schemas/UserDTO"
        description: "Response after successful authentication"
      FriendDTO: 
        type: "object"
        required: 
          - "userId"
          - "username"
          - "stars"
          - "exp"
        properties: 
          userId: 
            type: "integer"
            description: "User ID"
            example: 1
          username: 
            type: "string"
            description: "Username"
            example: "john_doe"
          firstName: 
            type: "string"
            description: "First name"
            example: "John"
          lastName: 
            type: "string"
            description: "Last name"
            example: "Doe"
          photoUrl: 
            type: "string"
            description: "Photo URL"
            example: "https://example.com/photo.jpg"
          stars: 
            type: "integer"
            description: "Stars earned"
            example: 150
          exp: 
            type: "integer"
            description: "Experience points"
            example: 750
      FriendInviteDTO: 
        type: "object"
        required: 
          - "inviteId"
          - "userId"
          - "createdAt"
        properties: 
          inviteId: 
            type: "integer"
            description: "Invite ID"
            example: 123
          userId: 
            type: "integer"
            description: "User ID who created the invite"
            example: 1
          createdAt: 
            type: "string"
            format: "date-time"
            description: "Creation date"
            example: "2024-01-01T00:00:00.000Z"
      FriendshipDTO: 
        type: "object"
        required: 
          - "id"
          - "user1Id"
          - "user2Id"
          - "createdAt"
        properties: 
          id: 
            type: "integer"
            description: "Friendship ID"
            example: 1
          user1Id: 
            type: "integer"
            description: "First user ID"
            example: 1
          user2Id: 
            type: "integer"
            description: "Second user ID"
            example: 2
          createdAt: 
            type: "string"
            format: "date-time"
            description: "Creation date"
            example: "2024-01-01T00:00:00.000Z"
      LanguageDTO: 
        type: "object"
        required: 
          - "id"
          - "name"
        properties: 
          id: 
            type: "integer"
            description: "Language ID"
            example: 1
          name: 
            type: "string"
            description: "Language name"
            example: "English"
          icon: 
            type: "string"
            description: "Language icon URL"
            example: "/icons/en.png"
      LeaderboardEntryDTO: 
        type: "object"
        required: 
          - "position"
          - "userId"
          - "username"
          - "stars"
        properties: 
          position: 
            type: "integer"
            description: "Position in leaderboard"
            example: 1
          userId: 
            type: "integer"
            description: "User ID"
            example: 1
          username: 
            type: "string"
            description: "Username"
            example: "john_doe"
          firstName: 
            type: "string"
            description: "First name"
            example: "John"
          lastName: 
            type: "string"
            description: "Last name"
            example: "Doe"
          photoUrl: 
            type: "string"
            description: "Photo URL"
            example: "https://example.com/photo.jpg"
          stars: 
            type: "integer"
            description: "Stars earned"
            example: 500
      LeaderboardDTO: 
        type: "object"
        required: 
          - "leaders"
          - "currentUser"
        properties: 
          leaders: 
            type: "array"
            items: 
              $ref: "#/components/schemas/LeaderboardEntryDTO"
          currentUser: 
            $ref: "#/components/schemas/LeaderboardEntryDTO"
      LessonDTO: 
        type: "object"
        required: 
          - "id"
          - "moduleId"
          - "title"
          - "text"
        properties: 
          id: 
            type: "integer"
            description: "Lesson ID"
            example: 1
          moduleId: 
            type: "integer"
            description: "Module ID"
            example: 1
          title: 
            type: "string"
            description: "Lesson title"
            example: "Introduction to Grammar"
          text: 
            type: "string"
            description: "Lesson content"
            example: "This lesson covers basic grammar rules..."
      UserProgressDTO: 
        type: "object"
        required: 
          - "questsCount"
          - "score"
        properties: 
          questsCount: 
            type: "integer"
            description: "Number of quests completed"
            example: 5
          score: 
            type: "integer"
            description: "Total score achieved"
            example: 450
      LevelDTO: 
        type: "object"
        required: 
          - "id"
          - "moduleId"
          - "icon"
          - "questsCount"
        properties: 
          id: 
            type: "integer"
            description: "Level ID"
            example: 1
          moduleId: 
            type: "integer"
            description: "Module ID"
            example: 1
          icon: 
            type: "string"
            description: "Level icon"
            example: "üéØ"
          questsCount: 
            type: "integer"
            description: "Total number of quests in level"
            example: 10
          userProgress: 
            allOf: 
              - 
                $ref: "#/components/schemas/UserProgressDTO"
            nullable: true
      MediaDTO: 
        type: "object"
        required: 
          - "mediaId"
          - "filename"
          - "url"
          - "createdAt"
        properties: 
          mediaId: 
            type: "integer"
            description: "Media ID"
            example: 1
          filename: 
            type: "string"
            description: "File name"
            example: "audio_123.wav"
          mimetype: 
            type: "string"
            description: "MIME type"
            example: "audio/wav"
          duration: 
            type: "number"
            format: "float"
            description: "Duration in seconds"
            example: 3.5
          fileSize: 
            type: "integer"
            description: "File size in bytes"
            example: 102400
          url: 
            type: "string"
            description: "URL to access the media file"
            example: "/media/1"
          createdAt: 
            type: "string"
            format: "date-time"
            description: "Creation date"
            example: "2024-01-01T00:00:00.000Z"
      ModuleDTO: 
        type: "object"
        required: 
          - "id"
          - "languageId"
          - "name"
        properties: 
          id: 
            type: "integer"
            description: "Module ID"
            example: 1
          languageId: 
            type: "integer"
            description: "Language ID"
            example: 1
          name: 
            type: "string"
            description: "Module name"
            example: "Basics"
          icon: 
            type: "string"
            description: "Module icon URL"
            example: "/icons/basics.png"
      MatchWordPairDTO: 
        type: "object"
        required: 
          - "word"
          - "translate"
        properties: 
          word: 
            type: "string"
            example: "–ü—Ä–∏–≤–µ—Ç"
          translate: 
            type: "string"
            example: "Hello"
      WordDTO: 
        type: "object"
        required: 
          - "id"
          - "value"
        properties: 
          id: 
            type: "string"
            example: "1"
          value: 
            type: "string"
            example: "hello"
          mediaId: 
            type: "string"
            example: "1"
      QuestMatchWordsResponse: 
        type: "object"
        required: 
          - "id"
          - "type"
          - "levelId"
          - "match_words"
        properties: 
          id: 
            type: "string"
            example: "4"
          type: 
            type: "string"
            enum: 
              - "MATCH_WORDS"
            example: "MATCH_WORDS"
          levelId: 
            type: "string"
            example: "1"
          match_words: 
            type: "array"
            items: 
              $ref: "#/components/schemas/MatchWordPairDTO"
      QuestDictationResponse: 
        type: "object"
        required: 
          - "id"
          - "type"
          - "levelId"
          - "correctSentence"
          - "words"
        properties: 
          id: 
            type: "string"
            example: "2"
          type: 
            type: "string"
            enum: 
              - "DICTATION"
            example: "DICTATION"
          levelId: 
            type: "string"
            example: "1"
          mediaId: 
            type: "string"
            example: "10"
          correctSentence: 
            type: "string"
            example: "a b c"
          words: 
            type: "array"
            items: 
              $ref: "#/components/schemas/WordDTO"
      QuestTranslateResponse: 
        type: "object"
        required: 
          - "id"
          - "type"
          - "levelId"
          - "sourceSentence"
          - "correctSentence"
          - "words"
        properties: 
          id: 
            type: "string"
            example: "3"
          type: 
            type: "string"
            enum: 
              - "TRANSLATE"
            example: "TRANSLATE"
          levelId: 
            type: "string"
            example: "1"
          sourceSentence: 
            type: "string"
            example: "–ü—Ä–∏–≤–µ—Ç, –º–µ–Ω—è –∑–æ–≤—É—Ç –¥–∏–º–∞"
          correctSentence: 
            type: "string"
            example: "Hello, my name is dima"
          words: 
            type: "array"
            items: 
              $ref: "#/components/schemas/WordDTO"
      UserDTO: 
        type: "object"
        required: 
          - "id"
          - "externalId"
          - "username"
          - "stars"
          - "exp"
          - "role"
          - "createdAt"
        properties: 
          id: 
            type: "integer"
            description: "Internal user ID"
            example: 1
          externalId: 
            type: "integer"
            description: "External user ID from Telegram"
            example: 123456789
          username: 
            type: "string"
            description: "Username"
            example: "john_doe"
          firstName: 
            type: "string"
            description: "User's first name"
            example: "John"
          lastName: 
            type: "string"
            description: "User's last name"
            example: "Doe"
          photoUrl: 
            type: "string"
            description: "URL to user's photo"
            example: "https://example.com/photo.jpg"
          stars: 
            type: "integer"
            description: "Number of stars earned"
            example: 100
          exp: 
            type: "integer"
            description: "Experience points"
            example: 500
          role: 
            type: "string"
            enum: 
              - "user"
              - "admin"
            description: "User role"
            example: "user"
          languageId: 
            type: "integer"
            description: "Selected language ID"
            example: 1
          createdAt: 
            type: "string"
            format: "date-time"
            description: "Account creation date"
            example: "2024-01-01T00:00:00.000Z"
          lastLoginAt: 
            type: "string"
            format: "date-time"
            description: "Last login date"
            example: "2024-01-15T10:30:00.000Z"
  paths: 
    /api/auth: 
      post: 
        tags: 
          - "Authentication"
        summary: "Authenticate user via Telegram initData"
        description: "Authenticates a user using Telegram WebApp initData and returns access token. RefreshToken is set in httpOnly cookie."
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "initData"
                properties: 
                  initData: 
                    type: "string"
                    description: "Telegram WebApp initialization data"
                    example: "query_id=AAHdF6IQAAAAAN0XohDhrOrc&user=%7B%22id%22%3A279058397..."
        responses: 
          200: 
            description: "Successfully authenticated"
            headers: 
              Set-Cookie: 
                description: "HttpOnly cookie with refresh token"
                schema: 
                  type: "string"
                  example: "refreshToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...; Max-Age=2592000; Path=/; HttpOnly; Secure; SameSite=Strict"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/AuthResponseDTO"
          400: 
            description: "Bad request - initData is missing"
          401: 
            description: "Unauthorized - invalid initData"
    /api/auth/me: 
      get: 
        tags: 
          - "Authentication"
        summary: "Get current user profile"
        description: "Returns the profile of the currently authenticated user"
        security: 
          - 
            JWT: []
        responses: 
          200: 
            description: "User profile retrieved successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/UserDTO"
          401: 
            description: "Unauthorized - invalid or missing access token"
    /api/friends: 
      get: 
        tags: 
          - "Friends"
        summary: "Get friend list"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "List of friends"
            content: 
              application/json: 
                schema: 
                  type: "array"
                  items: 
                    $ref: "#/components/schemas/FriendDTO"
          401: 
            description: "Unauthorized"
    /api/friends/{friendId}: 
      delete: 
        tags: 
          - "Friends"
        summary: "Remove a friend"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "friendId"
            required: true
            schema: 
              type: "integer"
            description: "Friend's user ID"
        responses: 
          204: 
            description: "Friend removed successfully"
          401: 
            description: "Unauthorized"
          404: 
            description: "Friend not found"
    /api/friends/invite: 
      post: 
        tags: 
          - "Friends"
        summary: "Create a friend invite"
        security: 
          - 
            bearerAuth: []
        responses: 
          201: 
            description: "Invite created successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/FriendInviteDTO"
          401: 
            description: "Unauthorized"
    /api/friends/invite/{inviteId}/accept: 
      post: 
        tags: 
          - "Friends"
        summary: "Accept a friend invite"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "inviteId"
            required: true
            schema: 
              type: "integer"
            description: "Invite ID"
        responses: 
          201: 
            description: "Friendship created successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/FriendshipDTO"
          400: 
            description: "Already friends or cannot accept own invite"
          401: 
            description: "Unauthorized"
          404: 
            description: "Invite not found"
    /api/languages: 
      get: 
        tags: 
          - "Languages"
        summary: "Get all languages"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "List of languages"
            content: 
              application/json: 
                schema: 
                  type: "array"
                  items: 
                    $ref: "#/components/schemas/LanguageDTO"
      post: 
        tags: 
          - "Languages"
        summary: "Create a language (admin only)"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "name"
                properties: 
                  name: 
                    type: "string"
                  icon: 
                    type: "string"
        responses: 
          201: 
            description: "Language created successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LanguageDTO"
          400: 
            description: "Language already exists"
          403: 
            description: "Admin access required"
    /api/languages/{languageId}: 
      get: 
        tags: 
          - "Languages"
        summary: "Get language by ID"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "languageId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Language data"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LanguageDTO"
          404: 
            description: "Language not found"
      put: 
        tags: 
          - "Languages"
        summary: "Update a language (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "languageId"
            required: true
            schema: 
              type: "integer"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  name: 
                    type: "string"
                  icon: 
                    type: "string"
        responses: 
          200: 
            description: "Language updated successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LanguageDTO"
          400: 
            description: "Language name already exists"
          403: 
            description: "Admin access required"
          404: 
            description: "Language not found"
      delete: 
        tags: 
          - "Languages"
        summary: "Delete a language (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "languageId"
            required: true
            schema: 
              type: "integer"
        responses: 
          204: 
            description: "Language deleted successfully"
          403: 
            description: "Admin access required"
          404: 
            description: "Language not found"
    /api/modules/{moduleId}/lesson: 
      get: 
        tags: 
          - "Lessons"
        summary: "Get module lesson"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Lesson data"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LessonDTO"
          204: 
            description: "No lesson found"
          404: 
            description: "Module not found"
      post: 
        tags: 
          - "Lessons"
        summary: "Create a lesson (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "title"
                  - "text"
                properties: 
                  title: 
                    type: "string"
                  text: 
                    type: "string"
        responses: 
          201: 
            description: "Lesson created successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LessonDTO"
          400: 
            description: "Lesson already exists"
          403: 
            description: "Admin access required"
          404: 
            description: "Module not found"
      put: 
        tags: 
          - "Lessons"
        summary: "Update a lesson (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  title: 
                    type: "string"
                  text: 
                    type: "string"
        responses: 
          200: 
            description: "Lesson updated successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LessonDTO"
          403: 
            description: "Admin access required"
          404: 
            description: "Module or lesson not found"
      delete: 
        tags: 
          - "Lessons"
        summary: "Delete a lesson (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        responses: 
          204: 
            description: "Lesson deleted successfully"
          403: 
            description: "Admin access required"
          404: 
            description: "Module or lesson not found"
    /api/modules/{moduleId}/levels: 
      get: 
        tags: 
          - "Levels"
        summary: "Get levels of a module with user progress"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "List of levels"
            content: 
              application/json: 
                schema: 
                  type: "array"
                  items: 
                    $ref: "#/components/schemas/LevelDTO"
          404: 
            description: "Module not found"
    /api/levels/{levelId}: 
      get: 
        tags: 
          - "Levels"
        summary: "Get level by ID"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "levelId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Level data"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LevelDTO"
          404: 
            description: "Level not found"
      put: 
        tags: 
          - "Levels"
        summary: "Update a level (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "levelId"
            required: true
            schema: 
              type: "integer"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  icon: 
                    type: "string"
                  moduleId: 
                    type: "integer"
        responses: 
          200: 
            description: "Level updated successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LevelDTO"
          403: 
            description: "Admin access required"
          404: 
            description: "Level not found"
      delete: 
        tags: 
          - "Levels"
        summary: "Delete a level (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "levelId"
            required: true
            schema: 
              type: "integer"
        responses: 
          204: 
            description: "Level deleted successfully"
          403: 
            description: "Admin access required"
          404: 
            description: "Level not found"
    /api/levels: 
      post: 
        tags: 
          - "Levels"
        summary: "Create a level (admin only)"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "moduleId"
                  - "icon"
                properties: 
                  moduleId: 
                    type: "integer"
                  icon: 
                    type: "string"
        responses: 
          201: 
            description: "Level created successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LevelDTO"
          403: 
            description: "Admin access required"
          404: 
            description: "Module not found"
    /api/levels/{levelId}/submit: 
      post: 
        tags: 
          - "Levels"
        summary: "Submit level completion result"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "levelId"
            required: true
            schema: 
              type: "integer"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "score"
                properties: 
                  score: 
                    type: "integer"
                    minimum: 0
                    maximum: 100
                    description: "Score achieved (0-100)"
        responses: 
          200: 
            description: "Level submitted successfully"
            content: 
              application/json: 
                schema: 
                  type: "object"
                  properties: 
                    stars: 
                      type: "integer"
                    exp: 
                      type: "integer"
          400: 
            description: "Invalid score"
          404: 
            description: "Level not found"
    /api/media/{mediaId}: 
      get: 
        tags: 
          - "Media"
        summary: "Get media file metadata"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "mediaId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Media metadata"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/MediaDTO"
          404: 
            description: "Media not found"
    /api/media/{mediaId}/file: 
      get: 
        tags: 
          - "Media"
        summary: "Get actual media file"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "mediaId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Media file"
            content: 
              audio/wav: 
                schema: 
                  type: "string"
                  format: "binary"
          404: 
            description: "Media not found"
    /api/languages/{languageId}/modules: 
      get: 
        tags: 
          - "Modules"
        summary: "Get modules by language"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "languageId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "List of modules"
            content: 
              application/json: 
                schema: 
                  type: "array"
                  items: 
                    $ref: "#/components/schemas/ModuleDTO"
          404: 
            description: "Language not found"
    /api/modules/{moduleId}: 
      get: 
        tags: 
          - "Modules"
        summary: "Get module by ID"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Module data"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/ModuleDTO"
          404: 
            description: "Module not found"
      put: 
        tags: 
          - "Modules"
        summary: "Update a module (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                properties: 
                  name: 
                    type: "string"
                  icon: 
                    type: "string"
        responses: 
          200: 
            description: "Module updated successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/ModuleDTO"
          400: 
            description: "Module name already exists"
          403: 
            description: "Admin access required"
          404: 
            description: "Module not found"
      delete: 
        tags: 
          - "Modules"
        summary: "Delete a module (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "moduleId"
            required: true
            schema: 
              type: "integer"
        responses: 
          204: 
            description: "Module deleted successfully"
          403: 
            description: "Admin access required"
          404: 
            description: "Module not found"
    /api/modules: 
      post: 
        tags: 
          - "Modules"
        summary: "Create a module (admin only)"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "languageId"
                  - "name"
                properties: 
                  languageId: 
                    type: "integer"
                  name: 
                    type: "string"
                  icon: 
                    type: "string"
        responses: 
          201: 
            description: "Module created successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/ModuleDTO"
          400: 
            description: "Module already exists"
          403: 
            description: "Admin access required"
          404: 
            description: "Language not found"
    /api/levels/{levelId}/quests: 
      get: 
        tags: 
          - "Quests"
        summary: "Get quests of a level"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "levelId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "List of quests"
            content: 
              application/json: 
                schema: 
                  type: "array"
                  items: 
                    $ref: "#/components/schemas/QuestDTO"
          404: 
            description: "Level not found"
    /api/quests/{questId}: 
      get: 
        tags: 
          - "Quests"
        summary: "Get full quest data"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "questId"
            required: true
            schema: 
              type: "integer"
        responses: 
          200: 
            description: "Quest data"
            content: 
              application/json: 
                schema: 
                  oneOf: 
                    - 
                      $ref: "#/components/schemas/QuestMatchWordsResponse"
                    - 
                      $ref: "#/components/schemas/QuestDictationResponse"
                    - 
                      $ref: "#/components/schemas/QuestTranslateResponse"
          404: 
            description: "Quest not found"
      delete: 
        tags: 
          - "Quests"
        summary: "Delete a quest (admin only)"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "path"
            name: "questId"
            required: true
            schema: 
              type: "integer"
        responses: 
          204: 
            description: "Quest deleted successfully"
          403: 
            description: "Admin access required"
          404: 
            description: "Quest not found"
    /api/quests: 
      post: 
        tags: 
          - "Quests"
        summary: "Create a quest (admin only)"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                oneOf: 
                  - 
                    type: "object"
                    required: 
                      - "type"
                      - "levelId"
                      - "data"
                    properties: 
                      type: 
                        type: "string"
                        enum: 
                          - "MATCH_WORDS"
                      levelId: 
                        type: "integer"
                        example: 1
                      data: 
                        type: "array"
                        items: 
                          type: "object"
                          required: 
                            - "word"
                            - "translate"
                          properties: 
                            word: 
                              type: "string"
                              example: "–ü—Ä–∏–≤–µ—Ç"
                            translate: 
                              type: "string"
                              example: "Hello"
                  - 
                    type: "object"
                    required: 
                      - "type"
                      - "levelId"
                      - "correctSentence"
                    properties: 
                      type: 
                        type: "string"
                        enum: 
                          - "DICTATION"
                      levelId: 
                        type: "integer"
                        example: 1
                      correctSentence: 
                        type: "string"
                        example: "Any sentence"
                      distractorWords: 
                        type: "array"
                        items: 
                          type: "string"
                        example: 
                          - "word3"
                          - "word4"
                  - 
                    type: "object"
                    required: 
                      - "type"
                      - "levelId"
                      - "sourceSentence"
                      - "correctSentence"
                    properties: 
                      type: 
                        type: "string"
                        enum: 
                          - "TRANSLATE"
                      levelId: 
                        type: "integer"
                        example: 1
                      sourceSentence: 
                        type: "string"
                        example: "–ü—Ä–∏–≤–µ—Ç, —è —Å—Ç–∏–≤"
                      correctSentence: 
                        type: "string"
                        example: "Hello, i am steave"
                      distractorWords: 
                        type: "array"
                        items: 
                          type: "string"
                        example: 
                          - "are"
                          - "is"
        responses: 
          201: 
            description: "Quest created successfully"
            content: 
              application/json: 
                schema: 
                  oneOf: 
                    - 
                      $ref: "#/components/schemas/QuestMatchWordsResponse"
                    - 
                      $ref: "#/components/schemas/QuestDictationResponse"
                    - 
                      $ref: "#/components/schemas/QuestTranslateResponse"
          400: 
            description: "Invalid quest type"
          403: 
            description: "Admin access required"
          404: 
            description: "Level not found"
    /api/stats/leaderboard: 
      get: 
        tags: 
          - "Stats"
        summary: "Get leaderboard"
        security: 
          - 
            bearerAuth: []
        parameters: 
          - 
            in: "query"
            name: "type"
            required: true
            schema: 
              type: "string"
              enum: 
                - "all"
                - "friends"
            description: "Leaderboard type"
        responses: 
          200: 
            description: "Leaderboard data"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/LeaderboardDTO"
          400: 
            description: "Invalid leaderboard type"
          401: 
            description: "Unauthorized"
    /api/user/language: 
      put: 
        tags: 
          - "User"
        summary: "Set user's learning language"
        security: 
          - 
            bearerAuth: []
        requestBody: 
          required: true
          content: 
            application/json: 
              schema: 
                type: "object"
                required: 
                  - "languageId"
                properties: 
                  languageId: 
                    type: "integer"
                    description: "ID of the language to learn"
                    example: 1
        responses: 
          200: 
            description: "Language updated successfully"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/UserDTO"
          401: 
            description: "Unauthorized"
          404: 
            description: "Language not found"
    /api/user/profile: 
      get: 
        tags: 
          - "User"
        summary: "Get user profile"
        security: 
          - 
            bearerAuth: []
        responses: 
          200: 
            description: "User profile"
            content: 
              application/json: 
                schema: 
                  $ref: "#/components/schemas/UserDTO"
          401: 
            description: "Unauthorized"
          404: 
            description: "User not found"
  tags: 
    - 
      name: "Authentication"
      description: "User authentication and session management"
    - 
      name: "User"
      description: "User profile management endpoints"
    - 
      name: "Friends"
      description: "Friend management endpoints"
    - 
      name: "Stats"
      description: "Statistics and leaderboard endpoints"
    - 
      name: "Languages"
      description: "Language management endpoints"
    - 
      name: "Modules"
      description: "Module management endpoints"
    - 
      name: "Lessons"
      description: "Lesson management endpoints"
    - 
      name: "Levels"
      description: "Level management endpoints"
    - 
      name: "Quests"
      description: "Quest management endpoints"
    - 
      name: "Media"
      description: "Media file endpoints"
